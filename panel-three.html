<!DOCTYPE html>
    <html lang="en">

    <head>
        <meta charset="utf-8" />
        <title>Dashboard</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta content="A fully featured admin theme which can be used to build CRM, CMS, etc." name="description" />
        <meta content="Coderthemes" name="author" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <script type="text/javascript" src="script.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css">
        <!-- App favicon -->
        <link rel="shortcut icon" href="assets/images/favicon.ico">

        <!-- third party css -->
        <link href="assets/css/vendor/jquery-jvectormap-1.2.2.css" rel="stylesheet" type="text/css" />
        <!-- third party css end -->

        <!-- App css -->
        <link href="assets/css/icons.min.css" rel="stylesheet" type="text/css" />
        <link href="assets/css/app.min.css" rel="stylesheet" type="text/css" />
        <link href="assets/css/icons.min.css" rel="stylesheet" type="text/css" />
        <link href="assets/css/app.min.css" rel="stylesheet" type="text/css" />
        <link rel="shortcut icon" href="assets/images/favicon.ico">

        <!-- App css -->
        <link href="assets/css/icons.min.css" rel="stylesheet" type="text/css" />
        <link href="assets/css/app.min.css" rel="stylesheet" type="text/css" />
        <script src="assets/js/vendor/apexcharts.min.js"></script>
        <script src="assets/js/vendor/Chart.bundle.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
        <script src="https://cdn.rawgit.com/nnattawat/flip/master/dist/jquery.flip.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>


    </head>

    <script>


        fetch("http://localhost:3000/panelOne/2018-11-01/2018-11-02")
        .then(res => res.json())
        .then(function(result){
            console.log(result[0]);
        
        var ethicalPercentage = (result[0].totalEthicalSales * 100)/(result[0].totalSales)
        var genericalPercentage = (result[0].totalGenericSales * 100)/(result[0].totalSales)
        
        
        
        
        $("#TotalEthicalGrossMarginText").text(parseInt(result[0].totalGrossMargins))
        $("#TotalGrossMarginText").text(parseInt(2*result[0].totalGrossMargins))
        $("#TotalGenericGrossMarginText").text(parseInt(0.6*result[0].totalGrossMargins))
        $("#TotalOtherGrossMarginText").text(parseInt(0.4*result[0].totalGrossMargins))
        $("#TotalOtherPurchaseText").text(parseInt(result[0].totalOtherPurchase))
        $("#TotalEthicalPurchaseText").text(parseInt(result[0].totalEthicalPurchase))
        $("#TotalGenericPurchaseText").text(parseInt(result[0].totalGenericPurchase))
        $("#TotalEthicalSalesText").text(parseInt(result[0].totalEthicalSales))
        $("#TotalGenericSalesText").text(parseInt(result[0].totalGenericSales))
        $("#TotalOtherSalesText").text(parseInt(result[0].otherSales))
         $("#TotalSalesText").text(parseInt(result[0].totalSales))
         $("#TotalPurchaseText").text(parseInt(result[0].totalPurchase))
         $("#ethicalPercentage").text(Number.parseFloat(ethicalPercentage).toFixed(2))
         $("#genericalPercentage").text(Number.parseFloat(genericalPercentage).toFixed(2))
        
        var bool = true;
        
        
        setInterval(function(){
            if(bool){
                
            $("#TotalSalesText").text(parseInt(result[0].averageSales))
            $("#TotalSalesTextbox").text(" Average Sales")
            $("#totalSalesBox").addClass("card text-white bg-info")
            $("#TotalSalesTextbox").css("color","white")
            $("#totalSalesBox").css("transition","all 0.8s ease")
        
            $("#TotalPurchaseText").text(parseInt(result[0].averagePurchase))
            $("#TotalPurchaseTextbox").text(" Average Purchase")
            $("#totalPurchaseBox").addClass("card text-white bg-info")
            $("#TotalPurchaseTextbox").css("color","white")
            $("#totalPurchaseBox").css("transition","all 0.8s ease")
        
             $("#TotalEthicalSalesText").text(parseInt(result[0].averageEthicalSales))
            $("#TotalEthicalSalesTextbox").text(" Average Ethical Purchase")
            $("#totalEthicalSalesBox").addClass("card text-white bg-info")
            $("#TotalEthicalSalesTextbox").css("color","white")
            $("#totalEthicalSalesBox").css("transition","all 0.8s ease")

            $("#TotalGenericSalesText").text(parseInt(result[0].averageGenericSales))
            $("#TotalGenericSalesTextbox").text(" Average Generic Purchase")
            $("#totalGenericSalesBox").addClass("card text-white bg-info")
            $("#TotaGenericTextbox").css("color","white")
            $("#totalGenericSalesBox").css("transition","all 0.8s ease")

            $("#TotalOtherSalesText").text(parseInt(result[0].averageOtherPurchase))
            $("#TotalOtherSalesTextbox").text(" Average Other Purchase")
            $("#totalOtherSalesBox").addClass("card text-white bg-info")
            $("#TotaOtherSalesTextbox").css("color","white")
            $("#totalOtherSalesBox").css("transition","all 0.8s ease")


            $("#TotalEthicalPurchaseText").text(parseInt(result[0].averageEthicalPurchase))
            $("#TotalEthicalPurchaseTextbox").text(" Average Ethical Purchase")
            $("#totalEthicalPurchaseBox").addClass("card text-white bg-info")
            $("#TotalEthicalPurchaseTextbox").css("color","white")
            $("#totalEthicalPurchaseBox").css("transition","all 0.8s ease")

            
            $("#TotalGenericPurchaseText").text(parseInt(result[0].averageGenericPurchase))
            $("#TotalGenericPurchaseTextbox").text(" Average Generic Purchase")
            $("#totalGenericPurchaseBox").addClass("card text-white bg-info")
            $("#TotalGenericPurchaseTextbox").css("color","white")
            $("#totalGenericPurchaseBox").css("transition","all 0.8s ease")

            $("#TotalOtherPurchaseText").text(parseInt(result[0].averageOtherPurchase))
            $("#TotalOtherPurchaseTextbox").text(" Average Other Purchase")
            $("#totalOtherPurchaseBox").addClass("card text-white bg-info")
            $("#TotalOtherPurchaseTextbox").css("color","white")
            $("#totalOtherPurchaseBox").css("transition","all 0.8s ease")
        
            bool = false;
            
            }
        
        
            else{
            $("#TotalSalesText").text(parseInt(result[0].totalSales))
            $("#TotalSalesTextbox").text(" Total Sales")
            $("#totalSalesBox").removeClass("card text-white bg-info")
            $("#totalSalesBox").addClass("card widget-flat")
            $("#TotalSalesTextbox").css("color","#6C757D")
            $("#totalSalesBox").css("transition","all 0.8s ease")
        
            $("#TotalPurchaseText").text(parseInt(result[0].totalPurchase))
            $("#TotalPurchaseTextbox").text(" Total Purchase")
            $("#totalPurchaseBox").removeClass("card text-white bg-info")
            $("#totalPurchaseBox").addClass("card widget-flat")
            $("#TotalPurchaseTextbox").css("color","black")
            $("#totalPurchaseBox").css("transition","all 0.8s ease")
        
            $("#TotalEthicalSalesText").text(parseInt(result[0].totalEthicalSales))
            $("#TotalEthicalSalesTextbox").text(" Total Ethical Sales")
            $("#totalEthicalSalesBox").removeClass("card text-white bg-info")
            $("#totalEthicalSalesBox").addClass("card widget-flat")
            $("#TotalEthicalSalesTextbox").css("color","black")
            $("#totalEthicalSalesBox").css("transition","all 0.8s ease")

            $("#TotalGenericSalesText").text(parseInt(result[0].totalGenericSales))
            $("#TotalGenericTextbox").text(" Total Generic Sales")
            $("#totalGenericSalesBox").removeClass("card text-white bg-info")
            $("#totalGenericSalesBox").addClass("card widget-flat")
            $("#TotalGenericTextbox").css("color","black")
            $("#totalGenericSalesBox").css("transition","all 0.8s ease")

            $("#TotalOtherSalesText").text(parseInt(result[0].otherSales))
            $("#TotalOtherTextbox").text(" Total Other Sales")
            $("#totalOtherSalesBox").removeClass("card text-white bg-info")
            $("#totalOtherSalesBox").addClass("card widget-flat")
            $("#TotalOtherTextbox").css("color","black")
            $("#totalOtherSalesBox").css("transition","all 0.8s ease")


            $("#TotalEthicalPurchaseText").text(parseInt(result[0].totalEthicalPurchase))
            $("#TotalEthicalPurchaseTextbox").text(" Total Ethical Purchase")
            $("#totalEthicalPurchaseBox").removeClass("card text-white bg-info")
            $("#totalEthicalPurchaseBox").addClass("card widget-flat")
            $("#TotalEthicalPurchaseTextbox").css("color","black")
            $("#totalEthicalPurchaseBox").css("transition","all 0.8s ease")


            $("#TotalGenericPurchaseText").text(parseInt(result[0].totalGenericPurchase))
            $("#TotalGenericPurchaseTextbox").text(" Total Generic Purchase")
            $("#totalGenericPurchaseBox").removeClass("card text-white bg-info")
            $("#totalGenericPurchaseBox").addClass("card widget-flat")
            $("#TotalGenericPurchaseTextbox").css("color","black")
            $("#totalGenericPurchaseBox").css("transition","all 0.8s ease")

            $("#TotalOtherPurchaseText").text(parseInt(result[0].totalOtherPurchase))
            $("#TotalOtherPurchaseTextbox").text(" Total Other Purchase")
            $("#totalOtherPurchaseBox").removeClass("card text-white bg-info")
            $("#totalOtherPurchaseBox").addClass("card widget-flat")
            $("#TotalOtherPurchaseTextbox").css("color","black")
            $("#totalOtherPurchaseBox").css("transition","all 0.8s ease")

            bool = true;
            }
        },2000)
        
        
        
        function flip() {
            
        }
        
        
        
     
        
            
        })
        
        
        
        
        
        
        fetch("http://localhost:3000/panelTwo")
        .then(res => res.json())
        .then(function(result){
        console.log(result[0]);
                var shortageArray = []
                var exceededArray = [];
                var shortageArray = [];
                var genericSalesArray = [];
                var ethicalSalesArray = [];
                var totalSalesArray = [];
        
        for (let i = 0; i < result.length; i++) {
        
        ethicalSalesArray.push(result[i].totalEthicalSales)
        
        }
        
        
        for (let i = 0; i < result.length; i++) {
        
        genericSalesArray.push(result[i].totalGenericSales)
        
        }
        for (let i = 0; i < result.length; i++) {
        
        totalSalesArray.push(result[i].totalSales)
        
        }
        var totalSales = totalSalesArray.reduce((a, b) => a + b, 0);
        var totalGenericSalesValue = genericSalesArray.reduce((a, b) => a + b, 0);
        var totalGenericPercentage = ((totalGenericSalesValue)*100 / totalSales );
        console.log(totalSales); // 6
        document.getElementById('totalgenper').innerHTML = parseFloat(totalGenericPercentage).toFixed(0);
        document.getElementById('second').innerHTML = parseFloat(totalSales).toFixed(0);
        
          for (let i = 0; i < result.length; i++) {
          
          if((1500000 - (result[i].totalEthicalSales + result[i].totalGenericSales)) > 0  ){
              
              
              var valueToPush = 1500000 - (result[i].totalEthicalSales + result[i].totalGenericSales)
              console.log(valueToPush);
              shortageArray.push(valueToPush)
              exceededArray.push(-1)
        
           }else{
             var valueToPush = 1500000 - (result[i].totalEthicalSales + result[i].totalGenericSales)
             console.log(valueToPush);
             exceededArray.push(Math.abs(valueToPush))
             shortageArray.push(-1)
         }
        }
         
         var options = {
                    chart: {
                        height: 800,
                        width:900,
                        type: 'bar',
                        stacked:!0,
                        stackType:"100%",
                        toolbar: {
                            show: !0
                        },
                        zoom: {
                            enabled: true
                        }
                    },
                    responsive: [{
                        breakpoint: 700,
                        options: {
                            legend: {
                                position: 'bottom',
                                offsetX: -10,
                                offsetY: 0
                            }
                        }
                    }],
                    plotOptions:{bar:{horizontal:!1,columnWidth:"50%"}
                    },
                    series:[
                    {name:"Generic",data:genericSalesArray},
                    {name:"Ethical",data:ethicalSalesArray},
                    {name:"Exceeded target By",data:exceededArray},
                    {name:"Shortage target By",data:shortageArray}
                 
                    ],
                    xaxis:{categories:["Month To Date"]},
                    colors:["#39afd1","#0acf97","#03eee3","#e3eaef"],
                    fill:{opacity:1},grid:{row:{colors:["transparent","transparent"],opacity:.2},borderColor:"#f1f3fa"},
                }
        
               var chart = new ApexCharts(
                    document.querySelector("#chart"),
                    options
                );
                
                chart.render();
        
        
                $("button.btn.btn-outline-info.btn-rounded").on("click",function(e){
                    alert($(this).attr("id"))
                })
                                                                        
        
                                                                    })
        
        
                                                                    
                                                                </script>

    <body>

        <!-- Begin page -->
        <div class="wrapper">

            <!-- ========== Left Sidebar Start ========== -->
            <div class="left-side-menu">

                <div class="slimscroll-menu">

                    <!-- LOGO -->
                    <a href="index.html" class="logo text-center">
                        <span class="logo-lg">
                            <img src="assets/images/whitegen.png" alt="" height="25" width="180">
                        </span>
                        <span class="logo-sm">
                            <img src="assets/images/logo_sm.png" alt="" height="16">
                        </span>
                    </a>

                    <!--- Sidemenu -->
                    <ul class="metismenu side-nav">

                        <li class="side-nav-title side-nav-item">Navigation</li>

                        <li class="side-nav-item">
                            <a href="index.html" class="side-nav-link">
                                <i class="dripicons-meter"></i>
                                <span class="badge badge-success float-right">7</span>
                                <span> Summary </span>
                            </a>
                        </li>

                        <li class="side-nav-item">
                            <a href="javascript: void(0);" class="side-nav-link">
                                <i class="dripicons-view-apps"></i>
                                <span> Sales Panel </span>
                                <span class="menu-arrow"></span>
                            </a>
                            <ul class="side-nav-second-level" aria-expanded="false">
                                <li>
                                    <a href="panel-one.html">panel One</a>
                                    <!-- <a href="sales-gauge-two.html">Gauge 11</a> -->
                                </li>
                            </ul>
                            <ul class="side-nav-second-level" aria-expanded="false">
                                <li>
                                    <a href="panel-two.html">Panel Two</a>
                                    <!-- <a href="sales-gauge-two.html">Gauge 11</a> -->
                                </li>
                            </ul>
                            <ul class="side-nav-second-level" aria-expanded="false">
                                <li>
                                    <a href="panel-three.html">Panel Three</a>
                                    <!-- <a href="sales-gauge-two.html">Gauge 11</a> -->
                                </li>
                            </ul>
                           
                            <ul class="side-nav-second-level" aria-expanded="false">
                                <li>
                                    <a href="sales-gauge.html">Gauge</a>
                                    <!-- <a href="sales-gauge-two.html">Gauge 11</a> -->
                                </li>
                            </ul>
                        </li>

                        <li class="side-nav-item">
                            <a href="javascript: void(0);" class="side-nav-link">
                                <i class="dripicons-view-apps"></i>
                                <span> Analytic Dashboard </span>
                                <span class="menu-arrow"></span>
                            </a>
                            <ul class="side-nav-second-level" aria-expanded="false">
                                <li>
                                    <a href="sales-gauge.html">Customers</a>
                                    <a href="">Footfall(Visitors)</a>
                                </li>
                                
                            </ul>
                            </ul>
                        </li>
                            
            

                </div>
                <!-- Sidebar -left -->

            </div>
            <!-- Left Sidebar End -->

            <!-- ============================================================== -->
            <!-- Start Page Content here -->
            <!-- ============================================================== -->

            <div class="content-page">
                <div class="content">

       


            <!-- end Topbar -->
                    

                    <!-- Start Content-->
                    <div class="container-fluid">



                        <!-- end row -->


    <div class="row">

 
    

                     
                         
                                      
                                        
                                             
                           

                                    <div class="col col-lg-8">
                                        <div class="card">
                                                <div id="donutChart"></div>
                                        </div>
                                            
                                    </div>
                                    <div class="col-lg-4">
                                
                                            <div class="card text-white bg-dark" style="width:400px">
         
                                             
                                                 <p style="text-align:center" class="text mb-0 mt-3">Total Sales</p>
                                                 <h3 class="font-weight-bold mb-3" style="text-align:center">
                                                     
                                                     <span id="second"></span>
                                                     
         
                                                 </h3>
         
                                             </div>
                                             
                                             <div class="card text-white bg-success" style="width:400px">
                                                 <p style="text-align:center" class="text mb-0 mt-3">Generic Sales Percentage</p>
                                                 <h3 class="font-weight-bold mb-3" style="text-align:center">
                                                    
                                                     <span id="totalgenper"></span>%
                                                     
                                                 </h3>
                                             </div>

                                             <div class="card text-white bg-primary" style="width:400px">
                                                    <p style="text-align:center" class="text mb-0 mt-3">Generic Sales Percentage</p>
                                                    <h3 class="font-weight-bold mb-3" style="text-align:center">
                                                       
                                                        <span id="totalgenper"></span>%
                                                        
                                                    </h3>
                                                </div>

                                                <div class="card text-white bg-danger" style="width:400px">
                                                        <p style="text-align:center" class="text mb-0 mt-3">Generic Sales Percentage</p>
                                                        <h3 class="font-weight-bold mb-3" style="text-align:center">
                                                           
                                                            <span id="totalgenper"></span>%
                                                            
                                                        </h3>
                                                    </div>

                                                    <div class="card text-white bg-info" style="width:400px">
                                                            <p style="text-align:center" class="text mb-0 mt-3">Generic Sales Percentage</p>
                                                            <h3 class="font-weight-bold mb-3" style="text-align:center">
                                                               
                                                                <span id="totalgenper"></span>%
                                                                
                                                            </h3>
                                                        </div>
        
         
                                             </div>
                                   </div>
                                </div>
                                                   
                                                
                                            </div>


                                            </div>
                                       
                                   
                                
                                       

<script>
      var options = {
            chart: {
                height: 680,
                type: 'donut',
            },
            series: [44, 55, 41, 17, 15],
           

        }

       var chart = new ApexCharts(
            document.querySelector("#donutChart"),
            options
        );
        
        chart.render();
</script>

                <!-- Footer Start -->
                <footer class="footer">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-md-6">
                                2018 © Hyper - Coderthemes.com
                            </div>
                            <div class="col-md-6">
                                <div class="text-md-right footer-links d-none d-md-block">
                                    <a href="javascript: void(0);">About</a>
                                    <a href="javascript: void(0);">Support</a>
                                    <a href="javascript: void(0);">Contact Us</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </footer>
                <!-- end Footer -->

            </div>

            <!-- ============================================================== -->
            <!-- End Page content -->
            <!-- ============================================================== -->


        </div>
        <!-- END wrapper -->

        <!-- Right Sidebar -->
        <div class="right-bar">

            <div class="rightbar-title">
                <a href="javascript:void(0);" class="right-bar-toggle float-right">
                    <i class="dripicons-cross noti-icon"></i>
                </a>
                <h5 class="m-0">Settings</h5>
            </div>

            <div class="slimscroll-menu rightbar-content">

                <!-- Settings -->
                <hr class="mt-0" />
                <h5 class="pl-3">Basic Settings</h5>
                <hr class="mb-0" />

                <div class="p-3">
                    <div class="custom-control custom-checkbox mb-2">
                        <input type="checkbox" class="custom-control-input" id="notifications-check" checked>
                        <label class="custom-control-label" for="notifications-check">Notifications</label>
                    </div>

                    <div class="custom-control custom-checkbox mb-2">
                        <input type="checkbox" class="custom-control-input" id="api-access-check">
                        <label class="custom-control-label" for="api-access-check">API Access</label>
                    </div>

                    <div class="custom-control custom-checkbox mb-2">
                        <input type="checkbox" class="custom-control-input" id="auto-updates-check" checked>
                        <label class="custom-control-label" for="auto-updates-check">Auto Updates</label>
                    </div>

                    <div class="custom-control custom-checkbox mb-2">
                        <input type="checkbox" class="custom-control-input" id="online-status-check" checked>
                        <label class="custom-control-label" for="online-status-check">Online Status</label>
                    </div>

                    <div class="custom-control custom-checkbox mb-2">
                        <input type="checkbox" class="custom-control-input" id="auto-payout-check">
                        <label class="custom-control-label" for="auto-payout-check">Auto Payout</label>
                    </div>

                </div>


                <!-- Timeline -->
                <hr class="mt-0" />
                <h5 class="pl-3">Recent Activity</h5>
                <hr class="mb-0" />
                <div class="pl-2 pr-2">
                    <div class="timeline-alt">
                        <div class="timeline-item">
                            <i class="mdi mdi-upload bg-info-lighten text-info timeline-icon"></i>
                            <div class="timeline-item-info">
                                <a href="#" class="text-info font-weight-bold mb-1 d-block">You sold an item</a>
                                <small>Paul Burgess just purchased “Hyper - Admin Dashboard”!</small>
                                <p>
                                    <small class="text-muted">5 minutes ago</small>
                                </p>
                            </div>
                        </div>

                        <div class="timeline-item">
                            <i class="mdi mdi-airplane bg-info-lighten text-info timeline-icon"></i>
                            <div class="timeline-item-info">
                                <a href="#" class="text-info font-weight-bold mb-1 d-block">Product on the Bootstrap Market</a>
                                <small>Dave Gamache added
                                    <span class="font-weight-bold">Admin Dashboard</span>
                                </small>
                                <p>
                                    <small class="text-muted">30 minutes ago</small>
                                </p>
                            </div>
                        </div>

                        <div class="timeline-item">
                            <i class="mdi mdi-microphone bg-info-lighten text-info timeline-icon"></i>
                            <div class="timeline-item-info">
                                <a href="#" class="text-info font-weight-bold mb-1 d-block">Robert Delaney</a>
                                <small>Send you message
                                    <span class="font-weight-bold">"Are you there?"</span>
                                </small>
                                <p>
                                    <small class="text-muted">2 hours ago</small>
                                </p>
                            </div>
                        </div>

                        <div class="timeline-item">
                            <i class="mdi mdi-upload bg-info-lighten text-info timeline-icon"></i>
                            <div class="timeline-item-info">
                                <a href="#" class="text-info font-weight-bold mb-1 d-block">Audrey Tobey</a>
                                <small>Uploaded a photo
                                    <span class="font-weight-bold">"Error.jpg"</span>
                                </small>
                                <p>
                                    <small class="text-muted">14 hours ago</small>
                                </p>
                            </div>
                        </div>

                        <div class="timeline-item">
                            <i class="mdi mdi-upload bg-info-lighten text-info timeline-icon"></i>
                            <div class="timeline-item-info">
                                <a href="#" class="text-info font-weight-bold mb-1 d-block">You sold an item</a>
                                <small>Paul Burgess just purchased “Hyper - Admin Dashboard”!</small>
                                <p>
                                    <small class="text-muted">1 day ago</small>
                                </p>
                            </div>
                        </div>

                    </div>
  
                </div>
            </div>
        </div>
        <!-- /Right-bar -->

        <!-- bundle -->
        <script src="assets/js/app.min.js"></script>

        <!-- third party js -->
        <script src="assets/js/vendor/Chart.bundle.min.js"></script>
        <script src="assets/js/vendor/jquery-jvectormap-1.2.2.min.js"></script>
        <script src="assets/js/vendor/jquery-jvectormap-world-mill-en.js"></script>
        <!-- third party js ends -->

        <!-- demo app -->
        <script src="assets/js/pages/demo.dashboard.js"></script>
         <script src="assets/js/app.min.js"></script>
        <script src="assets/js/vendor/apexcharts.min.js"></script>
        <script src="assets/js/pages/demo.apex-column.js"></script>

        <!-- end demo js-->
    </body>

</html>